services:
  web:
    image: node:20
    working_dir: /app
    command: sh -c "npm install && npm run dev"
    ports:
      - "5173:5173"
    environment:
      # Backend DESHABILITADO - Funciona solo con mocks locales
      - VITE_BACKEND=disabled
      # - VITE_API_BASE=http://localhost:8080  # Comentado
      - VITE_GALLERY_ADMIN_EMAILS=franciscolorenzo2406@gmail.com
      - CHOKIDAR_USEPOLLING=true
      # Supabase DESHABILITADO
      # - VITE_SUPABASE_URL=
      # - VITE_SUPABASE_ANON_KEY=
    volumes:
      - ./:/app
      - /app/node_modules
    # Backend server removido de dependencias
    # depends_on:
    #   - server

  # ============================================
  # SERVIDOR BACKEND (OPCIONAL - DESHABILITADO)
  # ============================================
  # NOTA: El servidor requiere Python para compilar better-sqlite3
  # Si necesitas habilitarlo:
  # 1. Instala Python en tu sistema
  # 2. cd server && npm install
  # 3. Descomenta esta secci√≥n
  # 4. Cambia VITE_BACKEND=local en web service
  # ============================================
  # server:
  #   image: node:20
  #   working_dir: /app
  #   command: sh -c "npm install && npm run dev"
  #   environment:
  #     - PORT=8080
  #     - ORIGIN=http://localhost:5173
  #     - ADMIN_EMAILS=franciscolorenzo2406@gmail.com
  #     - ADMIN_SECRET=local-dev-admin
  #     - CHOKIDAR_USEPOLLING=true
  #   ports:
  #     - "8080:8080"
  #   volumes:
  #     - ./server:/app
  #     - /app/node_modules
  #     - ./server/data:/app/server/data
  #     - ./server/uploads:/app/server/uploads
